<!doctype html>
<html>
 <?php
 header("Access-Control-Allow-Origin: *");
?>
<head>

    <meta charset="utf-8">
    <title>30 days of JavaScript</title>
    <link rel="stylesheet" href="../2470/HomePage/js/bootstrap.min.js">
    <link rel="stylesheet" href="../2470/HomePage/js/bootstrap.js">
    <link rel="stylesheet" href="../2470/HomePage/css/custom.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">   
<script src="https://cdnjs.cloudflare.com/ajax/libs/fetch-jsonp/1.0.6/fetch-jsonp.min.js">
alert('me');	

fetchJsonp('http://localhost:3000')
  .then(res => res.json())
  .then(json => console.log(json));

</script> 
    
</head>

    <style>
	
        li{
            list-style: none;
            margin-left: auto;
            margin-right: auto;
                }
        ul{
            margin-top: 135px;
            margin-left: 150px;
        }
        button{
/*            width: 100px;*/
            min-width: 250px;
            max-width: 350px;
            border: 1px solid black;
            padding: 10px;
            margin-left: 5px;
            margin-right: 5px;
            margin-top: 5px;
            box-shadow: 1px 1px black, 2px 2px black, 3px 3px black, 4px 4px white;
            background-color: white;
        }
        .list{
            max-width: 75px;
            display: flex;
            flex-direction:row;
        }
        
        .aBtn{
            height: 5px;
            padding: 2px;
            border: 1px solid black;
            background-color: white;
            padding: 5px;
            margin-left: 5px;
            margin-right: 5px;
/*            display: flex;*/
        }
        
        .test{
/*            display: flex;*/
            flex-direction: row;
            width: 75%;
            max-width: 85%;
/*            flex: 1;*/
        }
        .links{
            
/*
            flex: 1;
            display: flex;
            flex-wrap: wrap;
*/
            min-width: 150px;
/*            width: 300px;*/
            max-width: 300px;
            background-color: white;
            text-decoration: none;
            box-shadow: 1px 1px gray, 2px 2px gray, 3px 3px gray, 4px 4px 4px black, 5px 5px black;
            margin-top: 9px;
            text-decoration: none;
            padding: 3px;
            margin-left: 8px;
        }
        
        .links:hover {
              /* 	background: #33a6cc; */
              box-shadow: none;
              margin-bottom: -10px;
              color: black;
            margin-left: 11px;
              margin-top: 13px;
              transition: all 0.5s ease;
}
        a{
/*            display: flex;*/
/*            flex: 1;*/
            min-width: 150px;
            width: 300px;
            max-width: 300px;
            background-color: white;
            text-decoration: none;
/*            box-shadow: 1px 1px gray, 2px 2px gray, 3px 3px gray, 4px 4px 4px black, 5px 5px black;*/
            margin-top: 9px;
            text-decoration: none;          
        }
        
    </style>

<body style="background:#617487">
    <div class="container">
        <div class="list"></div>
<!--
            <ul class="list">
            </ul>
-->
        </div>        
</body>
</html>

<script>


    const list = document.querySelector('.list');
    const test = document.querySelector('.test');
      var urls = [];
      let arr = [];
      const getTitle = (url) => {  
  return fetch(`https://crossorigin.me/${url}`)
    .then((response) => response.text())
    .then((html) => {
      const doc = new DOMParser().parseFromString(html, "text/html");
      const title = doc.querySelectorAll('title')[0];
//      arr.push([title.textContent]);
      return title.textContent;
    });
};
   //alert(btn);
    for(let i = 0; i < 29; i++){
        urls.push('https://davidhalls.github.io/Java30/'+i+'/');           
    }
    
   let promA = Promise.all(
  urls.map((url) => getTitle(url))
).then((titles) => {
  console.log(titles);   
       let varX;
       for(var i = 0; i < urls.length - 1; i++){   
           if(titles[i].length > 30){
               for(var j = 0; j < 30; j++){
                   varX += titles[i][j];
                   if(j == 29){
                       varX += '...';
                   }
               }
           }else{
               varX = titles[i];
           }
           document.getElementById('test_'+i).innerHTML = varX;
//           console.log(varX.includes('GitHub'));
           
           if(varX.includes('GitHub')){
               document.getElementById('test_'+i).parentNode.remove();
           }
           varX = '';
//           console.log(varX);
       }
});
    let x;
    for(var i = 0; i < urls.length - 1; i++){
        list.innerHTML += "<div class='links'><a href='../Java30/"+ i + "/index.html' id=test_"+ i + ">"+ i +"</a></div>";       
    }
    
   
    
    const links = document.querySelectorAll('.links');
    
     links.forEach(link => link.addEventListener('mouseover', function(){
         link.classList.add('active');
//         alert('this');
     }));
    links.forEach(link => link.addEventListener('mouseout', function(){
         link.classList.remove('active');
//         alert('this');
     }));
</script>























