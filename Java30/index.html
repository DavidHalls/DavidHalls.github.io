<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>30 days of JavaScript</title>
    <link rel="stylesheet" href="../2470/HomePage/js/bootstrap.min.js">
    <link rel="stylesheet" href="../2470/HomePage/js/bootstrap.js">
    <link rel="stylesheet" href="../2470/HomePage/css/custom.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">    
</head>

    <style>
        li{
            list-style: none;
            margin-left: auto;
            margin-right: auto;
                }
        ul{
            margin-top: 135px;
            margin-left: 150px;
        }
        button{
/*            width: 100px;*/
            min-width: 250px;
            max-width: 350px;
            border: 1px solid black;
            padding: 10px;
            margin-left: 5px;
            margin-right: 5px;
            margin-top: 5px;
            box-shadow: 1px 1px black, 2px 2px black, 3px 3px black, 4px 4px white;
            background-color: white;
        }
        .list{
            width: 75%;
        }
        
    </style>

<body style="background:#617487">
    <div class="container">
        <div class="test"></div>
            <ul class="list">
            </ul>
        </div>        
</body>
</html>

<script>
    const list = document.querySelector('.list');
    const test = document.querySelector('.test');
    const btn = document.querySelectorAll('button');
      var urls = [];
      let arr = [];
      const getTitle = (url) => {  
  return fetch(`https://crossorigin.me/${url}`)
    .then((response) => response.text())
    .then((html) => {
      const doc = new DOMParser().parseFromString(html, "text/html");
      const title = doc.querySelectorAll('title')[0];
//      arr.push([title.textContent]);
      return title.textContent;
    });
};
//    alert(btn);
    for(let i = 0; i < 29; i++){
        urls.push('https://davidhalls.github.io/Java30/'+i+'/');           
    }
    
   let promA = Promise.all(
  urls.map((url) => getTitle(url))
).then((titles) => {
//  console.log(titles);    
       for(var i = 0; i < urls.length - 1; i++){           
           document.getElementById('test_'+i).textContent = titles[i];
       }
});
    let x;
    for(var i = 0; i < urls.length - 1; i++){
        list.innerHTML += "<button><a href='../Java30/"+ i + "/index.html' id=test_"+ i + ">"+ i +" </a></button>";            
//        setText(i);
//        console.log(getTitle(urls[i]));
    }
//    console.log(promA);
    const btn1 = document.getElementById('test_1');
    
    function setText(title, id){
       test.textContent +=  title;
        console.log(title);
        if(title == "" || title == null){
            
        }else{            
//        document.getElementById('test_'+id).textContent = title;
        }
//        arr.push(getTitle(urls[id]));
//        then(function(result){
//            console.log(x);
//        })
//        console.log(x);
    }
    x = promA.then(function(result){
       
    })
//    console.log(x);
//    alert(arr[5].PromiseValue);
//    console.log(arr, arr.length);
//    x.then(function(result) {
//        console.log(result);
//    // here you can use the result of promiseB
//});
//  urls.map((url) => getTitle(url))
//).then((titles) => {
//  console.log(titles);     
//});
//    console.log(arr, arr[5]);
//    for(let i = 0; i < 29; i++){        
//     list.innerHTML += "<button><a href='../Java30/"+ i + "/index.html'>"+ i +"</a>";   
//        
//    }
    test.textContent += arr;
//    console.log(arr, arr.length, urls.length);
//    document.reload(5);
</script>























